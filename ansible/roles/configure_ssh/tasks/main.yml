---

- name: make ssh directory
  file:
    path: "/home/{{ ansible_user }}/.ssh"
    state: directory
- name: create empty file
  file:
    path: "/home/{{ ansible_user }}/.ssh/authorized_keys"
    state: touch
- name: put pubkey
  lineinfile:
    path: "/home/{{ ansible_user }}/.ssh/authorized_keys"
    line: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      38313563316666393838393035373730356436623464303761393139653335626233336262623661
      6134666461303766303531653331613632636261333231380a353832383766306262653262663963
      39653538326438386430326436366536303934656134656430336432343238343536616639643637
      3539663834366630340a623262356364663032653231363566323439386534393532303132623438
      32383866383565396439616632383463643266616132383963616366666265336535633630343139
      31663438653065613965313434336665623164313938316233336237373865386437303634303133
      64666337613863333866343062313832353432633963343339376264303838653635633432336630
      36663961356634356139643031653835383136656237356336356234393963633964386562343737
      63643963316666346433393536353031623261366563323465643963383162303834626664373666
      63363865666130346639396636653263343632353030326638303732346566643434333262313564
      36356563346536643365373365323261613263336462616438316230386638353864376365653433
      38323839393431333330623639663263613763383135313566323434366137393563643734333437
      36316137643631633039326436623162353330613832306238323730653462646566323862366635
      30366463613338353939326434656237633332353430653762333161393739646162373066653164
      32316438353063373535353533326639313231396334306533306465643937646330333864333935
      31373265363034613366353062613163336136316435343564643432376665303062383463616664
      36653633313736343863353037313131306438653331373733323635353033326639396337386432
      65666661363034636361663135633663656338326639376334336536623335653731393065613539
      37366435323039613164316662646338366336333230356131663963386263383364313933636431
      63626563616661353036646435383664636438316234323134353533653338666162333562306161
      32316162346565306164653338326563316461363161346136663164356363343830303532646162
      65326332373034626561366565333532393831633763616135666535623135346131333237383662
      63353732323864663438643263333565336438393661386364613665376665613161323335356439
      35643933646461343964303863303438653332613436343937636239323461333339383961323161
      34376533666238666365373138353335653037383165343237336263313633353730346466633366
      39616537383632656466643733363563323863666666316133336139333864663135373935306565
      39643131396634383164363739656366633131303866653465623565306536373632353135303936
      34336365353133623366396366313665616532303837393035393732643064393431343139613062
      34333766336165376363353734653434663663643866313932633565613665323361353236623438
      66626463333764346432376638373531383665303433623362623730666639306266623761306538
      65646361396238623732383235396164393538323033303831616134343265613965636464636665
      39343736303261613431633661326261373034396539663736343139346335656261306535356466
      66303366313639653764353134383462353864373732353031316565376439346363

- name: set hostname
  ansible.builtin.hostname:
    name: "{{ inventory_hostname }}"
